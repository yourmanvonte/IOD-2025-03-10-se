<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>eCharts Fake Store</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.1/dist/echarts.min.js"></script>
</head>
<body>
    <!-- Prepare a DOM with a defined width and height for ECharts -->
    <div id="main" style="width: 900px;height:600px;"></div>
    <script type="text/javascript">
    const myChart = echarts.init(document.getElementById('main'));

// Fetch product data from the API
fetch('https://fakestoreapi.com/products')
  .then(response => response.json())
  .then(data => {
    // Group products by category
    const categoryCounts = {};
    data.forEach(product => {
      const category = product.category;
      categoryCounts[category] = (categoryCounts[category] || 0) + 1;
    });

    // Prepare data for the chart
    const categories = Object.keys(categoryCounts);
    const counts = Object.values(categoryCounts);

    // Sets the eChart options
    const options = {
      title: { text: 'Products per Category' },
      tooltip: {},
      xAxis: {
        type: 'category',
        data: categories
      },
      yAxis: {
        type: 'value',
        name: 'Product Count'
      },
      series: [{
        name: 'Products',
        type: 'bar',
        data: counts
      }]
    };

    // Render the chart with the fetched data
    myChart.setOption(options);
  })
  .catch(error => {
    console.error('Error fetching data:', error); 
  });
    </script>
</body>
</html>